package training.iqgateway.repositories;

import java.util.List;
import java.util.Optional;

import org.springframework.data.mongodb.repository.MongoRepository;

import org.springframework.stereotype.Repository;

import training.iqgateway.entities.EligibilityStatus;
import training.iqgateway.entities.InsuranceEligibility;

@Repository
public interface InsuranceEligibilityRepository extends MongoRepository<InsuranceEligibility, String> {
    Optional<InsuranceEligibility> findByPatientIdAndPlanId(String patientId, String planId);
    List<InsuranceEligibility> findByPatientId(String patientId);
    List<InsuranceEligibility> findByPatientIdAndStatus(String patientId, EligibilityStatus status);
    List<InsuranceEligibility> findByStatus(EligibilityStatus status);
    
//    @Query("{'patient.id': ?0, 'plan.id': ?1, 'status': ?2}")
    Optional<InsuranceEligibility> findByPatient_IdAndPlan_IdAndStatus(String patientId, String planId, EligibilityStatus status);
}
